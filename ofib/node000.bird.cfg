
log "/tmp/node000.bird.log" all;

debug protocols all;
debug channels all;
debug latency yes;




router id 0.0.0.1;


protocol device {}

protocol direct {
  disabled;		# Disable by default
  ipv4;			# Connect to default IPv4 table
  ipv6;			# ... and to default IPv6 table
}

protocol kernel {
  learn;
  ipv4 {
    export none;
    import all;
  };
}

protocol kernel {
  learn yes;
  ipv6 {
    export filter {
	if source = RTS_OSPF then accept;
	reject;
    };
    import all;
  };
}



protocol ospf v3 {

    debug all;
    ecmp yes;
    ipv6 {
	import all;
	export all;
    };
    
    tls certificate "/tmp/node000.cert.pem";
    tls key "/tmp/node000.key";
    alpn "OSPFv3";
    tls peer require auth on;
    tls root ca "/root/ca.cert.pem";
    tls insecure on;
    
    area 0 {
    
	interface "veth000000" {
	    tls sni "node001";
	    link lsa suppression yes;
	    hello 5;
	    cost 1;
	    type ptp;
	};
    
	interface "veth000001" {
	    tls sni "node002";
	    link lsa suppression yes;
	    hello 5;
	    cost 1;
	    type ptp;
	};
    
	interface "veth000002" {
	    tls sni "node003";
	    link lsa suppression yes;
	    hello 5;
	    cost 1;
	    type ptp;
	};
    
	interface "veth000003" {
	    tls sni "node004";
	    link lsa suppression yes;
	    hello 5;
	    cost 1;
	    type ptp;
	};
    
	interface "veth000004" {
	    tls sni "node005";
	    link lsa suppression yes;
	    hello 5;
	    cost 1;
	    type ptp;
	};
    
	interface "lo" {
	    stub yes;
	};
    };

}

